{% extends "./base.njk" %}

{% if 'social_image' in developer and 'tag_line' in developer %}
	{% block seo %}
		<title>{{ developer.name }}</title>
		<meta name="description" content="{{ developer.tag_line }}">
		<meta name="keywords" content="{{ developer.keywords }}">

		{# Facebook #}
		<meta property="og:image" content="{{ developer.social_image }}">
		<meta property="og:title" content="{{ developer.name }}"/>
		<meta property="og:description" content="{{ developer.tag_line }}"/>

		{# Twitter #}
		<meta name="twitter:title" content="{{ developer.name }}">
		<meta name="twitter:description" content="{{ developer.tag_line }}">
		<meta name="twitter:image" content="{{ developer.social_image }}">
	{% endblock %}
{% endif %}

{% block main %}

	{% set product = developer|mergeObjectFilter({learn_more_link: developer.documentation_link, learn_more_label: "View Documentation"}) %}
	{% include "section_product_page_hero.njk" %}


	{% for i in range(0, product.layout | length) %}
		{% set item = product.layout[i] %}

		{# The section mid_summary uses the main developer description as it's main-text #}
		{% if item.section === "mid_summary" %}
			{% set item = product.layout[i]|mergeObjectFilter({main_text: product.description}) %}
		{% endif %}

		{# The section documentation_link_banner uses title & link from the main section #}
		{% if item.section === "documentation_link_banner" %}
			{% set item = product.layout[i]|mergeObjectFilter({title: 'View '+ product.title + ' Documentation', link: product.documentation_link}) %}
		{% endif %}

		{% set component = "section_" + item.section + ".njk" %}
		{% include component %}
	{% endfor %}

	{% set form = { type: "api" } %}
	<section class="block">{% include "form.njk" %}</section>

{% endblock %}